<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Esp√≠a</title>
    <link rel="stylesheet" href="estilos.css">
</head>

<body>
    <div class="container">
        <button class="dark-mode-toggle" onclick="toggleDarkMode()" id="darkModeBtn">üåô</button>

        <h1>üïµÔ∏è El Esp√≠a üïµÔ∏è</h1>

        <div class="card">
            <div id="setup" class="setup-section">
                <div class="input-group">
                    <label for="playerName">Nombre del Jugador:</label>
                    <input type="text" id="playerName" placeholder="Ingresa el nombre">
                </div>

                <button onclick="addPlayer()">Agregar Jugador</button>

                <div class="players-section">
                    <div class="player-list">
                        <h3>Jugadores (m√≠nimo 3)</h3>
                        <div id="playersList"></div>
                    </div>

                    <div class="player-list">
                        <div class="input-group">
                            <label for="spyCount">N√∫mero de Esp√≠as (0-10):</label>
                            <input type="number" id="spyCount" min="0" max="10" value="1">
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="percentageMode">
                            <label for="percentageMode">ÔºÖ Modo Porcentajes</label>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="randomCategoryMode">
                            <label for="randomCategoryMode">üé≤ Categor√≠a Aleatoria</label>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="spyHelpMode">
                            <label for="spyHelpMode">‚ÑπÔ∏è Ayuda al Esp√≠a</label>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="spiesKnowEachOtherMode">
                            <label for="spiesKnowEachOtherMode">ü§ù Los Esp√≠as se Conocen</label>
                        </div>

                        <div id="probabilityInfo" class="probability-info hidden">
                            <strong>Modo Porcentajes Activado:</strong><br>
                            ‚Ä¢ 10% - Todos son esp√≠as<br>
                            ‚Ä¢ 90% - Partida Normal (seg√∫n configuraci√≥n)
                        </div>

                        <div id="randomCategoryInfo" class="probability-info hidden">
                            <strong>üé≤ Categor√≠a Aleatoria:</strong><br>
                            Se selecciona una categor√≠a al azar. Los jugadores no sabr√°n cu√°l fue elegida.
                        </div>

                        <div id="spyHelpInfo" class="probability-info hidden">
                            <strong>üïµÔ∏è Ayuda al Esp√≠a:</strong><br>
                            Categor√≠a aleatoria + Los esp√≠as conocen la categor√≠a (pero no la palabra exacta).
                        </div>

                        <div id="spiesKnowEachOtherInfo" class="probability-info hidden">
                            <strong>üïµÔ∏è‚Äç‚ôÄÔ∏è Los Esp√≠as se Conocen:</strong><br>
                            Los esp√≠as sabr√°n qui√©nes son sus compa√±eros. Se ajustan los porcentajes si el "Modo
                            Porcentajes" est√° activo (10% inocentes, 90% normal).
                        </div>

                        <div class="input-group">
                            <label for="category">Categor√≠a:</label>
                            <select id="category"></select>
                        </div>
                    </div>
                </div>

                <button class="Iniciar Juego" onclick="startGame()" id="startBtn" disabled>Iniciar Juego </button>
            </div>

            <div id="game" class="game-section hidden">
                <div id="intermediateScreen" class="intermediate-screen hidden">
                    <div class="intermediate-card">
                        <div class="question-mark">‚ùì</div>
                        <h2 id="nextPlayerName"></h2>
                        <p>Es tu turno. Toca para ver tu rol.</p>
                        <button onclick="showRole()" id="showRoleBtn" class="pulse-btn">Ver Mi Rol</button>
                    </div>
                </div>

                <div id="roleScreen" class="role-screen hidden">
                    <div class="role-card" id="roleCard">
                        <h2 id="playerNameDisplay"></h2>
                        <h3 id="roleDisplay"></h3>
                        <div id="wordDisplay" class="word-display"></div>
                        <p id="instructionDisplay" style="white-space: pre-wrap;"></p>
                    </div>

                    <button onclick="nextPlayer()" id="nextBtn">Siguiente Jugador</button>
                    <button onclick="endGame()" id="endBtn" class="hidden">Comenzar Ronda</button>
                </div>

                <div id="gameplayScreen" class="gameplay-screen hidden">
                    <div class="gameplay-card">
                        <div class="gameplay-icon">üé≠</div>
                        <h2>¬°A Jugar!</h2>
                        <p>Todos tienen su rol. Es hora de las preguntas.</p>
                        <p class="small-text">Traten de descubrir al esp√≠a (o pasar desapercibidos).</p>
                        <button onclick="showResults()" class="pulse-btn">Mostrar Roles</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="card categories-section">
            <h2>üìö Categor√≠as del Juego</h2>

            <div class="editor-toggle-section">
                <div class="checkbox-group">
                    <input type="checkbox" id="editorMode">
                    <label for="editorMode">üõ†Ô∏è Modo Editor</label>
                </div>
                <p class="editor-info">Activa el modo editor para gestionar categor√≠as y palabras</p>
            </div>

            <div class="categories-list-section">
                <h3>Categor√≠as Disponibles</h3>
                <div id="categoriesDisplay" class="categories-simple-list"></div>
            </div>

            <div id="editorSections" class="editor-sections hidden">
                <div class="add-category-section">
                    <h3>‚ûï Agregar Nueva Categor√≠a</h3>
                    <div class="input-group">
                        <label for="newCategoryName">Nombre de la Categor√≠a:</label>
                        <input type="text" id="newCategoryName" placeholder="Ej: Frutas">
                    </div>
                    <div class="input-group">
                        <label for="newCategoryWords">Palabras (separadas por comas):</label>
                        <textarea id="newCategoryWords" rows="3"
                            placeholder="Ej: Manzana, Banana, Naranja, Fresa..."></textarea>
                    </div>
                    <button onclick="addNewCategory()">Agregar Categor√≠a</button>
                </div>

                <div class="add-words-section">
                    <h3>üìù Agregar Palabras a Categor√≠a Existente</h3>
                    <div class="input-group">
                        <label for="existingCategory">Seleccionar Categor√≠a:</label>
                        <select id="existingCategory"></select>
                    </div>
                    <div class="input-group">
                        <label for="newWords">Nuevas Palabras (separadas por comas):</label>
                        <textarea id="newWords" rows="2"
                            placeholder="Ej: Nueva palabra 1, Nueva palabra 2..."></textarea>
                    </div>
                    <button onclick="addWordsToCategory()">Agregar Palabras</button>
                </div>

                <div class="edit-category-section">
                    <h3>‚úèÔ∏è Editar Palabras de Categor√≠a</h3>
                    <div class="input-group">
                        <label for="editCategory">Seleccionar Categor√≠a para Editar:</label>
                        <select id="editCategory"></select>
                    </div>
                    <button onclick="showCategoryWords()" id="showWordsBtn">Ver/Editar Palabras</button>

                    <div id="wordEditSection" class="word-edit-container hidden">
                        <h4>Palabras en la categor√≠a:</h4>
                        <div id="wordsList" class="words-edit-list"></div>
                        <div class="input-group" style="margin-top: 15px;">
                            <label for="editWords">Editar todas las palabras (separadas por comas):</label>
                            <textarea id="editWords" rows="4" placeholder="Edita las palabras aqu√≠..."></textarea>
                        </div>
                        <button onclick="saveEditedWords()">Guardar Cambios</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>